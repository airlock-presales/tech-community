schemaVersion: iam.airlock.com/v1
type: IamConfig
metadata:
  iamVersion: '8.5'
  history:
  - datetime: 2025-09-09T08:43:43.000Z
    author: Airlock-Team
    comment: Airlock Login/IAM configuration start template for a standalone installation.
spec:
- type: GlobalConfiguration
  id: mainSettings
  displayName: globalConfig
  properties:
    authenticationSettings:
      type: GlobalAuthenticationSettings
      id: authSettings
      displayName: Main Authentication Settings
    dataSources:
      type: GlobalPersisterSettings
      id: dataSources
      displayName: Data sources
      properties:
        acceptedSsoTicketRepository:
          type: PersistentAcceptedSsoTicketRepository
          id: ssoTicketRepo
          properties:
            sqlDataSource:
              type: JdbcConnectionPool
              id: sqlConnection
              displayName: H2 Database Connection
              properties:
                driverClass:
                - value: org.h2.Driver
                  var:
                    name: IAM_DB_DRIVER_CLASS
                password:
                - value: password
                  var:
                    name: IAM_DB_PASSWORD
                    sensitive: true
                url:
                - value: jdbc:h2:tcp://localhost:9001/iamdb
                  var:
                    name: IAM_DB_URL
                user:
                - value: airlock
                  var:
                    name: IAM_DB_USER
        tokenDataSource:
          type: DefaultTokenDataProvider
          id: tokenData
          displayName: Token Data Provider
          properties:
            tokenPersister:
              type: DatabaseTokenPersister
              id: tokenPersister
              displayName: Database Token Persister
              properties:
                sqlDataSource:
                  ref: sqlConnection
                tokenAssignmentColAdditionalInformation: ta_additional_information
                tokenAssignmentColAssignmentDate: ta_assignment_date
                tokenAssignmentColAssignmentUser: ta_assignment_user
                tokenAssignmentColComment: ta_comment
                tokenAssignmentColOrderNew: ta_order_new
                tokenAssignmentColOrderNewDate: ta_order_new_date
                tokenAssignmentColOrderNewUser: ta_order_new_user
                tokenAssignmentColOrderOptions: ta_order_options
                tokenAssignmentColTokenId: ta_token_id
                tokenAssignmentColUser: ta_user
                tokenAssignmentTable: token_assignment
                tokenColActivatesTokenId: activates_token_id
                tokenColActivationDate: activation_date
                tokenColActive: active
                tokenColFirstUsageDate: first_usage_date
                tokenColGenerationDate: generation_date
                tokenColGenericDataElement1: generic_data_element_1
                tokenColGenericDataElement10: generic_data_element_10
                tokenColGenericDataElement11: generic_data_element_11
                tokenColGenericDataElement12: generic_data_element_12
                tokenColGenericDataElement2: generic_data_element_2
                tokenColGenericDataElement3: generic_data_element_3
                tokenColGenericDataElement4: generic_data_element_4
                tokenColGenericDataElement5: generic_data_element_5
                tokenColGenericDataElement6: generic_data_element_6
                tokenColGenericDataElement7: generic_data_element_7
                tokenColGenericDataElement8: generic_data_element_8
                tokenColGenericDataElement9: generic_data_element_9
                tokenColLatestUsageDate: latest_usage_date
                tokenColObsoletesTokenId: obsoletes_token_id
                tokenColSerialId: serial_id
                tokenColTokenData: token_data
                tokenColTokenId: token_id
                tokenColTotalUsages: total_usages
                tokenColTrackingId: tracking_id
                tokenColType: type
                tokenColValidityRangeLower: validity_range_lower
                tokenColValidityRangeUpper: validity_range_upper
                tokenTable: token
        userStore:
          type: DatabaseUserStoreProvider
          id: userStore
          properties:
            databaseUserPersister:
              type: DatabaseUserPersister
              id: userPersister
              displayName: Users on Database
              properties:
                colAuthMethod: auth_method
                colAuthMigrationDate: auth_migration_date
                colChannelVerificationResends: channel_verification_resends
                colFailedLogins: failed_logins
                colFailedLoginsBeforeLatestLogin: failed_logins_before
                colFailedPasswordResets: pwd_failed_resets
                colFailedTokenCounts: failed_token_counts
                colFirstLogin: first_login
                colLastGSID: last_gsid_value
                colLastGSIDDate: last_gsid_date
                colLatestLoginAttempt: lat_login_attempt
                colLatestPasswordChange: pwd_lat_chg
                colLatestSuccessfulLogin: lat_succ_login
                colLatestUnlockAttempt: lat_unlock_attempt
                colNextAuthMethod: next_auth_method
                colNextEnforcedPasswordChange: pwd_next_chg
                colPassword: pwd_hash
                colPasswordChangeForced: pwd_chg_enf
                colPasswordDeliveryDate: pwd_lat_del
                colPasswordGenerationDate: pwd_lat_gen
                colPasswordOrderedDate: pwd_order_date
                colPasswordOrderedFlag: pwd_order_new
                colPasswordOrderedUser: pwd_order_user
                colRecordInsertionDate: rowInsertDate
                colRecordInsertionUser: rowInsertUser
                colRecordModificationDate: rowUpdateDate
                colRecordModificationUser: rowUpdateUser
                colRoleString: roles
                colSecondLatestSuccessfulLogin: lat_succ_login2
                colSecretQuestionsEnabled: secret_questions_enabled
                colSelfRegisteredFlag: self_registered
                colSelfRegistrationDate: self_registration_date
                colTotalLogins: total_logins
                colUnlockAttempts: unlock_attempts
                colUserLockDate: lock_date
                colUserLockReason: lock_reason
                colUserLocked: locked
                colUserName: username
                colUserNotValidAfter: not_valid_after
                colUserNotValidBefore: not_valid_before
                colUserValid: valid
                colVersionId: rowVersionId
                contextDataColumns:
                - pluginList:
                  - type: StringContextDataItem
                    id: ctxDataItemSalutation
                    displayName: Context Data Item 'salutation'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameSalutation
                        displayName: String Context Data 'salutation'
                        properties:
                          contextDataName: salutation
                  - type: StringContextDataItem
                    id: ctxDataItemGivenname
                    displayName: Context Data Item 'givenname'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameGivenname
                        displayName: String Context Data 'givenname'
                        properties:
                          contextDataName: givenname
                  - type: StringContextDataItem
                    id: ctxDataItemSurname
                    displayName: Context Data Item 'surname'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameSurname
                        displayName: String Context Data 'surname'
                        properties:
                          contextDataName: surname
                  - type: StringContextDataItem
                    id: ctxDataItemStreet
                    displayName: Context Data Item 'street'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameStreet
                        displayName: String Context Data 'street'
                        properties:
                          contextDataName: street
                  - type: StringContextDataItem
                    id: ctxDataItemStreetNumber
                    displayName: Context Data Item 'streetNumber'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameStreetNumber
                        displayName: String Context Data 'streetNumber'
                        properties:
                          contextDataName: streetNumber
                  - type: StringContextDataItem
                    id: ctxDataItemAddress2
                    displayName: Context Data Item 'address2'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameAddress2
                        displayName: String Context Data 'address2'
                        properties:
                          contextDataName: address2
                  - type: StringContextDataItem
                    id: ctxDataItemZip
                    displayName: Context Data Item 'zipcode'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameZip
                        displayName: String Context Data 'zipcode'
                        properties:
                          contextDataName: zipcode
                  - type: StringContextDataItem
                    id: ctxDataItemTown
                    displayName: Context Data Item 'town'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameTown
                        displayName: String Context Data 'town'
                        properties:
                          contextDataName: town
                  - type: StringContextDataItem
                    id: ctxDataItemState
                    displayName: Context Data Item 'state'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameState
                        displayName: String Context Data 'state'
                        properties:
                          contextDataName: state
                  - type: StringContextDataItem
                    id: ctxDataItemCountry
                    displayName: Context Data Item 'country'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameCountry
                        displayName: String Context Data 'country'
                        properties:
                          contextDataName: country
                  - type: StringContextDataItem
                    id: ctxDataItemCompany
                    displayName: Context Data Item 'company'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameCompany
                        displayName: String Context Data 'company'
                        properties:
                          contextDataName: company
                  - type: StringContextDataItem
                    id: ctxDataItemEmail
                    displayName: Context Data Item 'email'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameEmail
                        displayName: String Context Data 'email'
                        properties:
                          contextDataName: email
                  - type: StringContextDataItem
                    id: ctxDataItemLang
                    displayName: Context Data Item 'language'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameLang
                        displayName: String Context Data 'language'
                        properties:
                          contextDataName: language
                  - type: DateContextDataItem
                    id: ctxDataItemBirthdate
                    displayName: Context Data Item 'birthdate'
                    properties:
                      contextDataName:
                        type: DateContextDataItemName
                        id: ctxDataItemNameBirthdate
                        displayName: Date Context Data 'birthdate'
                        properties:
                          contextDataName: birthdate
                  - type: StringContextDataItem
                    id: ctxDataItemDisclaimerTag
                    displayName: Context Data Item 'disclaimer_tag'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameDisclaimerTag
                        displayName: String Context Data 'disclaimer_tag'
                        properties:
                          contextDataName: disclaimer_tag
                  - type: StringContextDataItem
                    id: ctxDataItemAuthMethod
                    displayName: Context Data Item 'auth_method'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameAuthMethod
                        displayName: String Context Data 'auth_method'
                        properties:
                          contextDataName: auth_method
                  - type: StringContextDataItem
                    id: ctxDataItemUsername
                    displayName: Context Data Item 'username'
                    properties:
                      contextDataName:
                        type: StringContextDataItemName
                        id: ctxDataItemNameUsername
                        displayName: String Context Data 'username'
                        properties:
                          contextDataName: username
                      readonlyOnUpdate: 'true'
                isPwdHashStringType: 'true'
                recordModificationUser: AirlockIAM
                sqlDataSource:
                  ref: sqlConnection
                userChangeEventListeners:
                - pluginList:
                  - type: TokenConsistencyUserChangeListener
                    id: tokenConsistencyUserChangeListener
                    displayName: Default Token Consistency User Change Listener
                    properties:
                      tokenServices:
                      - pluginList:
                        - type: GenericTokenService
                          id: genericUserTokenService
                          displayName: Generic Token Service
                  - type: LoginHistoryConsistencyUserChangeListener
                    id: loginHistoryConsistencyListener
                    displayName: Login History Consistency Listener
                    properties:
                      loginHistoryRepository:
                        type: DatabaseLoginHistoryRepository
                        id: loginHistoryRepo
                        displayName: Login History Respository
                        properties:
                          sqlDataSource:
                            ref: sqlConnection
                  - type: RememberMeConsistencyUserChangeListener
                    id: rememberMeConsistencyListener
                    displayName: Remember-Me Consistency User Change Listener
                    properties:
                      rememberMeSettings:
                        type: RememberMe
                        id: rememberMeSettings
                        properties:
                          repository:
                            type: RememberMeRepository
                            id: rememberMeRepo
                            properties:
                              sqlDataSource:
                                ref: sqlConnection
                userTableName: medusa_user
        userTrailDataSource:
          type: UserTrailLogRepository
          id: userTrailLogRepo
          displayName: User Trail Log Repository
          properties:
            sqlDataSource:
              ref: sqlConnection
    passwordSettings:
      type: PasswordSettings
      id: pwdSettings
      displayName: Password Settings
      properties:
        adminMayGeneratePassword: 'true'
        adminMaySetPassword: 'true'
        mayBeSelectedAsAuthMethod: 'true'
        passwordGenerator:
          type: ExtendedStringGenerator
          id: userPwdGenerator
          displayName: User Password Generator
          properties:
            passwordPolicy:
              type: SimplePasswordPolicy
              id: userPwdPolicy
              displayName: Default Password Policy for Users
              properties:
                maxAllowedLength: '100'
                minRequiredLength: '8'
                noPreviouslyUsedPasswords: 'true'
                requiredCharacters: CHARS_AND_DIGITS
            pattern: '{distinct:12}'
        passwordPolicy:
          ref: userPwdPolicy
        passwordService:
          type: PersisterPasswordService
          id: userPwdService
          displayName: Password Service for Users
          properties:
            hashFunction:
              type: PasswordHistoryHash
              id: pwdHash
              displayName: History Password Hash
              properties:
                passwordHash:
                  type: ScryptPasswordHash
                  id: scryptPwdHash
    stateRepository:
      type: InMemoryStateRepository
      id: stateRepo
- type: Loginapp
  id: loginapp
  displayName: loginapp
  properties:
    authenticationFlows:
      type: TargetApplications
      id: applications
      properties:
        applications:
        - pluginList:
          - type: TargetApplication
            id: 3dfcd2ca-4b85-4011-b7a9-b76a2fad5617
            displayName: TA for Airlock Gateway Config Center
            properties:
              applicationId:
                type: ApplicationId
                id: 9fa816ce-6c65-49bb-84b1-1350163c61d7
                displayName: AID for Airlock Gateway Config Center
                properties:
                  applicationId: airlock-gateway-config-center
              applicationSelector:
                type: RegexApplicationSelector
                id: 34ec5237-fa3c-4dc3-8b19-288630fa3191
                displayName: Regex for Airlock Gateway config center
                properties:
                  uriPattern: https://gw.example.com/airlock/alec_security_check
              authenticationFlow:
                type: AuthenticationFlow
                id: 773639e3-a8ce-403d-9bb8-14023928310c
                displayName: Flow for Gateway with SSO
                properties:
                  persistencyless: 'true'
                  processors:
                    type: DefaultPersistencyLessAuthenticationProcessors
                    id: 27309303-9b4f-48ff-867d-3f938da55096
                  steps:
                  - pluginList:
                    - type: OAuth2SsoStep
                      id: aa6170de-1243-44b8-aa97-d33ff08a3651
                      properties:
                        providerId:
                          type: OAuth2ProviderIdentifier
                          id: 37c72811-1a3d-4a36-94b1-2cedf62bff81
                          displayName: ID 4gateway-ergon
                          properties:
                            identifier: ergonSSO
              identityPropagation:
              - pluginList:
                - type: GenericIdentityPropagation
                  id: 1c8129ec-4b38-46a5-a1b3-7e795f60edf5
                  displayName: IDProp for Config Center
                  properties:
                    ticketAdder:
                      type: ForwardLocationParameterAdder
                      id: df6debc0-c023-4379-bd76-21567d9f3c17
                      displayName: Assertion in URL
                      properties:
                        ticketParameterName: alecAssertion
                    ticketStringProvider:
                      type: TicketStringProvider
                      id: 526d01c3-9361-4d7c-9ab0-f218559c7ccd
                      properties:
                        keyValues:
                        - pluginList:
                          - type: TicketKeyValue
                            id: 7d0e6ea5-3662-4461-9736-18849261b9c6
                            displayName: KV roles
                            properties:
                              ticketKey: roles
                              valueSelector: roles
                          - type: TicketKeyValue
                            id: 13f6bece-b3cf-4e6b-9d9f-75d271d810b5
                            displayName: KV username
                            properties:
                              ticketKey: username
                              valueSelector: user-id
                        ticketEncoder:
                          type: JwtTicketEncoderSettings
                          id: 1eea36b5-fc8e-4c91-8005-6f15bb0d6ddf
                          displayName: JWT f√ºr Airlock Config Center
                          properties:
                            claimsStoredAsArray:
                            - valueList:
                              - roles
                            encrypter:
                              type: JwtTicketDirectAesEncryptionSettings
                              id: e41a62e1-016d-41d7-a424-42ee0fe1b05d
                              displayName: Encrypter for Airlock Gateway Config Center
                              properties:
                                directEncryptionMethod: A256CBC_HS512
                                encryptionKey:
                                - value:
                                    storageId: gatewaycc
                            issuer: Airlock IAM
                            signer:
                              type: JwtTicketHmacSettings
                              id: 0ae12fbb-0412-42d3-9e32-32c743c52f73
                              displayName: Signer for Airlock Gateway Config Center
                              properties:
                                hmacKey:
                                - value:
                                    storageId: gatewaycc
                            usernameTicketKey: username
                        valueProviders:
                        - pluginList:
                          - type: UserIdentityValueMapProvider
                            id: 58ba8368-1b0d-40a6-b4ea-f308ecd4c194
                          - type: RolesProvider
                            id: 9d7b5bbe-4d1d-4efa-a545-ae096c982f96
                            properties:
                              roleProviders:
                              - pluginList:
                                - type: StaticRolesProvider
                                  id: bcf8a815-84b4-4fdc-a706-a9bb337c5aa4
                                  displayName: Static Role airlock administrator
                                  properties:
                                    roles:
                                    - valueList:
                                      - airlock-administrator
        defaultApplication:
          type: TargetApplication
          id: demoApp
          displayName: Demo Application
          properties:
            applicationId:
              type: ApplicationId
              id: demoApplicationId
              displayName: Application ID "demo"
              properties:
                applicationId: demo
            authenticationFlow:
              type: AuthenticationFlow
              id: authFlow-usernamePassword
              displayName: Username Password Authentication Flow
              properties:
                steps:
                - pluginList:
                  - type: RememberMeUserIdentifyingStep
                    id: rememberMeIdentStep
                    displayName: Remember-Me User Identification
                    properties:
                      tagsOnSuccess:
                      - pluginList:
                        - type: TagConfigImpl
                          id: weakAuthenticated
                          displayName: Weak Authentication Tag
                          properties:
                            name: WEAK_AUTHENTICATION
                  - type: UsernamePasswordAuthenticationStep
                    id: usernamePwdAuthStep
                    displayName: Username Password Authentication Step
                    properties:
                      dynamicStepActivations:
                      - pluginList:
                        - type: DynamicStepActivation
                          id: rememberMeStepActivation
                          displayName: Remember-Me
                          properties:
                            targetStepId:
                              type: StepId
                              id: rememberMeTokenGeneratingStepId
                              displayName: Remember-Me Token Generating Step ID "generate-remember-me-token"
                              properties:
                                id: generate-remember-me-token
                        - type: DynamicStepActivation
                          id: passwordChangeStepActivation
                          displayName: Voluntary Password Change
                          properties:
                            targetStepId:
                              type: StepId
                              id: voluntaryPwdChangeStepId
                              displayName: Voluntary Password Change Step ID "voluntary-password-change"
                              properties:
                                id: voluntary-password-change
                      passwordAttributeKey: PASSWORD
                      passwordRepository:
                        type: InMemoryPasswordRepository
                        id: inMemoryPwdRepo
                        properties:
                          hashFunction:
                            ref: pwdHash
                      policyToCheckOnLogin:
                        ref: userPwdPolicy
                      skipCondition:
                        type: TagCondition
                        id: hasWeakAuthTag
                        displayName: Has Weak Authentication Tag
                        properties:
                          tag:
                            ref: weakAuthenticated
                      stepId:
                        type: StepId
                        id: usernamePwdAuthStepId
                        displayName: Password Authentication Step ID "pwcheck"
                        properties:
                          id: pwcheck
                      tagsOnSuccess:
                      - pluginList:
                        - type: TagConfigImpl
                          id: passwordVerified
                          displayName: Password Verified Tag
                          properties:
                            name: PASSWORD_VERIFIED
                        - ref: weakAuthenticated
                  - type: SelectionStep
                    id: pwdChangeSelectionStep
                    displayName: Password Change Selection
                    properties:
                      availableOptions:
                      - pluginList:
                        - type: SelectionOption
                          id: mandatoryPwdChangeSelectionOption
                          displayName: Mandatory Password Change Selection Option
                          properties:
                            condition:
                              type: RedFlagCondition
                              id: mandatoryPwdChangeRedFlagRaised
                              displayName: Mandatory Password Change Red Flag
                              properties:
                                redFlag:
                                  type: MandatoryPasswordChangeRedFlag
                                  id: mandatoryPwdChangeRedFlag
                            name: MANDATORY_PASSWORD_CHANGE
                            steps:
                            - pluginList:
                              - type: MandatoryPasswordChangeStep
                                id: mandatoryPwdCheckStep
                                displayName: Mandatory Password Change
                                properties:
                                  oldPasswordAttempts: '3'
                                  oldPasswordRequired: 'false'
                                  passwordAttributeKey: PASSWORD
                                  passwordPolicy:
                                    ref: userPwdPolicy
                                  passwordRepository:
                                    ref: inMemoryPwdRepo
                      fallbackFlow:
                      - pluginList:
                        - type: VoluntaryPasswordChangeStep
                          id: voluntaryPwdChangeStep
                          displayName: Voluntary Password Change Step for Authentication
                          properties:
                            oldPasswordAttempts: '3'
                            oldPasswordRequired: 'false'
                            passwordAttributeKey: PASSWORD
                            passwordPolicy:
                              ref: userPwdPolicy
                            passwordRepository:
                              ref: inMemoryPwdRepo
                            requiresActivation: 'true'
                            stepId:
                              ref: voluntaryPwdChangeStepId
                  - type: RememberMeTokenGeneratingStep
                    id: rememberMeTokenGeneratingStep
                    displayName: Remember-Me Token Generation
                    properties:
                      stepId:
                        ref: rememberMeTokenGeneratingStepId
                  - type: LoginFromNewDeviceStep
                    id: loginFromNewDeviceStep
                    displayName: Login From New Device
                    properties:
                      cookieSettings:
                        type: NewDeviceCookie
                        id: loginFromNewDeviceCookie
                        properties:
                          key: eupp+EUj7HJUfLMwllGj/IUVITTAIGHT/URwv4fAXBo=
                          validity: 365d
                usernameTransformers:
                - pluginList:
                  - type: ContextDataUsernameTransformer
                    id: loginWithEmailAddressUsernameTransformer
                    displayName: Login with email address
                    properties:
                      contextDataColumns:
                      - valueList:
                        - email
            identityPropagation:
            - pluginList:
              - type: GenericIdentityPropagation
                id: demoAppIdPropagator
                displayName: REST Identity Propagation
                properties:
                  encoders:
                  - pluginList:
                    - type: UrlStringEncoder
                      id: urlStringEncoder
                  ticketAdder:
                    type: CookieTicketAdder
                    id: authTicketCookieAdder
                    properties:
                      cookieName: AUTH_TICKET
                  ticketStringProvider:
                    type: TicketStringProvider
                    id: dempAppJwtString
                    displayName: JWT Ticket String Provider
                    properties:
                      keyValues:
                      - pluginList:
                        - type: TicketKeyValue
                          id: ticketKeyUsername
                          displayName: Ticket Key "username"
                          properties:
                            ticketKey: username
                            valueSelector: user-id
                        - type: TicketKeyValue
                          id: ticketKeyRoles
                          displayName: Ticket Key "roles"
                          properties:
                            ticketKey: roles
                            valueSelector: roles-list
                      ticketEncoder:
                        type: JwtTicketEncoderSettings
                        id: demoAppJwtTicketEncoder
                        displayName: REST JWT Ticket Encoder
                        properties:
                          claimsStoredAsArray:
                          - valueList:
                            - roles
                          encrypter:
                            type: JwtTicketDirectAesEncryptionSettings
                            id: demoAppJwtTicketEncryptor
                            displayName: REST JWT Ticket Encryption
                            properties:
                              encryptionKey: '[ENC]kiSmepzf9J/Ji7K5vZ5piZKKSp9LBG+4QR3P0c9t0LsR086xdOzuEp5JY4hCFQWzoiLotvD/AIFNKQSMD6t1vQ=='
                          issuer: Airlock IAM
                          signer:
                            type: JwtTicketHmacSettings
                            id: demoAppJwtTicketSigner
                            displayName: REST JWT Ticket Signer
                            properties:
                              hmacKey: '[ENC]RegOpNNTzN7kVOGvGBCn5B51cHIPwyQ8NQIT8rGgiIctf4epOgFmuEJpg4+l8Po/T5TgczMFh41KljJl6UPdC5g6oaC0Bx14kiacRMEUlck9G9Wb5eUjbGDN+MOAIZO2YGRuYwEky3QEH/6vga5zeQ=='
                          usernameTicketKey: username
                      validitySeconds: '28800'
                      valueProviders:
                      - pluginList:
                        - type: UserIdentityValueMapProvider
                          id: userIdentityInfoMap
                        - type: RolesProvider
                          id: userRolesInfoMap
                          properties:
                            roleProviders:
                            - pluginList:
                              - type: UserRolesProvider
                                id: allUserRolesProvider
                              - type: StaticRolesProvider
                                id: staticRoleProvider
                                displayName: User Authenticated Role
                                properties:
                                  roles:
                                  - valueList:
                                    - authenticated
            usernameToPropagateProvider:
              type: UserPrincipalNameProvider
              id: usernameProvider
        rememberMeConfig:
          ref: rememberMeSettings
        temporaryLockingConfig:
          type: TemporaryLocking
          id: tempLocking
          displayName: Temporary Locking
          properties:
            temporaryLockingStrategyConfig:
              type: ExponentialTemporaryLockingStrategy
              id: expTempLockingStrategy
    eventSettings:
      type: LoginappEventSettings
      id: loginappEventSettings
      properties:
        eventSubscribers:
        - pluginList:
          - type: LoginappEmailEventSubscriber
            id: loginappEmailEventSubscriber
            displayName: Email Event Subscriber for User Locked (Loginapp)
            properties:
              bodyResourceKey: email.notification.user-locked-event.body
              emailService:
                type: DummyEmailService
                id: dummyEmailService
              event:
                type: UserLockedSubscribedEvent
                id: userLockedEvent
              language:
                type: ContextDataStringValueProvider
                id: userLangProvider
                displayName: Existing Language
                properties:
                  contextDataField:
                    ref: ctxDataItemNameLang
              recipientAddress:
                type: StringProviderRecipient
                id: eventEmailRecipientFromString
                properties:
                  stringProvider:
                    type: ContextDataStringValueProvider
                    id: userEmailProvider
                    displayName: Existing Email
                    properties:
                      contextDataField:
                        ref: ctxDataItemNameEmail
              subjectResourceKey: email.notification.user-locked-event.subject
              valueMapProviders:
              - pluginList:
                - type: ContextDataValueMapProvider
                  id: userContextDataMap
          - type: LoginappEmailEventSubscriber
            id: loginappLoggedInFromNewDeviceEventSubscriber
            displayName: Email Event Subscriber for Login From New Device (Loginapp)
            properties:
              bodyResourceKey: email.notification.login-from-new-device-event.body
              emailService:
                ref: dummyEmailService
              event:
                type: LoggedInFromNewDeviceEvent
                id: loggedInFromNewDeviceEvent
              language:
                ref: userLangProvider
              recipientAddress:
                ref: eventEmailRecipientFromString
              sendAsHtml: 'true'
              subjectResourceKey: email.notification.login-from-new-device-event.subject
              valueMapProviders:
              - pluginList:
                - ref: userContextDataMap
    gatewaySettings:
      type: LoginappGateway
      id: airlockGatewayLoginapp
    languageSettings:
      type: LanguageSettings
      id: languageSettings
      properties:
        defaultLanguage: de
    maintenanceMessages:
      type: MaintenanceMessage
      id: maintMsgSettings
      displayName: Maintenance Message Settings
      properties:
        messageService:
          type: DatabaseMaintenanceMessagePersister
          id: maintMsgPersister
          displayName: Maintenance Messages on Database
          properties:
            cacheTimeout: '5'
            messageColActive: active
            messageColLocation: location
            messageColName: name
            messageColRecordInsertionDate: rowInsertDate
            messageColRecordInsertionUser: rowInsertUser
            messageColRecordModificationDate: rowUpdateDate
            messageColRecordModificationUser: rowUpdateUser
            messageColSystemAvailable: system_available
            messageColValidFrom: valid_from
            messageColValidTo: valid_to
            messageColVersionId: rowVersionId
            messageTable: medusa_maint_msg
            sqlDataSource:
              ref: sqlConnection
            translationColLanguage: language
            translationColMessage: message
            translationColMessageRef: message_ref
            translationTable: medusa_maint_msg_tnsl
    oAuth2SSOSettings:
      type: OAuth2SSOClientSettings
      id: d570b2fc-9eca-4947-b6c8-43f8e5639229
      properties:
        flowClientSettings:
        - pluginList:
          - type: OpenIDConnectDiscoverySsoFlowClientSettings
            id: 66ad3b80-9ef8-47b7-9af0-52c14ff52d00
            displayName: Client for Gateway
            properties:
              clientId: 4gateway-ergon
              clientRedirectURI:
                type: OAuth2RestUiClientRedirectUri
                id: 7e8c187f-628c-4099-8d8c-017c8111f9f4
                properties:
                  externalIamURL: https://iam.example.com:8443/auch-login/
              clientSecret:
              - value:
                  storageId: sso_client_secret
              discoveryEndpointURL: https://sso.example.com/auth/rest/oauth2/authorization-servers/sso-op-asymmetric/.well-known/openid-configuration
              httpClient:
                type: HttpClient
                id: 7b741a8a-dedb-4651-920a-d740cffe0923
                properties:
                  allowOnlyTrustedCerts: 'false'
                  verifyServerHostname: 'false'
              idTokenResources:
              - pluginList:
                - type: OAuth2RemoteUsernameResource
                  id: 5125c1f5-51ab-47c1-a99c-c6acdad10c45
                  properties:
                    resourceSelector:
                      type: OAuth2SimpleResourceSelector
                      id: 95ef5f18-1ada-4305-87ba-4e6ccf3ab183
                      properties:
                        key: sub
              providerId:
                ref: 37c72811-1a3d-4a36-94b1-2cedf62bff81
    protectedSelfServices:
      type: ProtectedSelfServices
      id: protectedSelfServices
      properties:
        rememberMeDeviceList:
          type: RememberMeDeviceListSelfServiceRest
          id: rememberMeSelfServiceDeviceList
          properties:
            includeGeolocation: 'true'
            includeIpAddress: 'true'
            rememberMeConfig:
              ref: rememberMeSettings
        selfServiceFlows:
          type: ProtectedSelfServiceFlows
          id: protectedSelfServiceFlows
          properties:
            flows:
            - pluginList:
              - type: CustomProtectedSelfServiceFlow
                id: pwdChangeSelfServiceFlow
                displayName: Password Change Flow
                properties:
                  flowId:
                    type: FlowId
                    id: pwdChangeSelfServiceFlowId
                    displayName: Flow ID "password-change"
                    properties:
                      flowId: password-change
                  steps:
                  - pluginList:
                    - type: PasswordChangeSelfServiceStep
                      id: pwdChangeSelfServiceStep
                      displayName: Password Change Self-Service
                      properties:
                        oldPasswordAttempts: '3'
                        passwordPolicy:
                          ref: userPwdPolicy
                        passwordRepository:
                          ref: inMemoryPwdRepo
              - type: DefaultRememberMeDeviceDeletionFlow
                id: rememberMeDeletionSelfServiceFlow
                displayName: Remember-Me Deletion Flow
                properties:
                  flowId:
                    type: FlowId
                    id: rememberMeDeletionSelfServiceFlowId
                    displayName: Flow ID "remember-me-delete-device"
                    properties:
                      flowId: remember-me-delete-device
                  rememberMeConfig:
                    ref: rememberMeSettings
    publicSelfServiceFlows:
      type: PublicSelfServiceFlows
      id: publicSelfServiceFlows
      properties:
        flows:
        - pluginList:
          - type: PublicSelfServiceFlow
            id: pwdResetFlow
            displayName: Password Reset Flow
            properties:
              flowId:
                type: FlowId
                id: pwdResetFlowId
                displayName: Flow ID "password-reset"
                properties:
                  flowId: password-reset
              restrictions:
                type: DefaultPasswordResetRestrictions
                id: pwdResetRestrictions
              steps:
              - pluginList:
                - type: PublicSelfServiceUserIdentifyingStep
                  id: pwdResetUserIdStep
                  displayName: User Identification Step
                  properties:
                    captchaProvider:
                      type: ReCaptcha
                      id: reCaptcha
                      properties:
                        secretKey: 6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe
                        siteKey: 6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI
                - type: EmailIdentityVerificationStep
                  id: pwdResetEmailVerificationStep
                  displayName: Email Identity Verification Step For Password Reset
                  properties:
                    emailContextData:
                      ref: ctxDataItemNameEmail
                    emailService:
                      ref: dummyEmailService
                    otpGenerator:
                      type: ExtendedStringGenerator
                      id: pwdResetOtpGenerator
                      displayName: Email OTP Generator
                - type: PasswordResetStep
                  id: pwdResetSetPasswordSet
                  displayName: Public Self-Service Set Password Step
                  properties:
                    passwordPolicy:
                      ref: userPwdPolicy
                    passwordRepository:
                      ref: inMemoryPwdRepo
              usernameTransformers:
              - pluginList:
                - ref: loginWithEmailAddressUsernameTransformer
    securitySettings:
      type: SecuritySettings
      id: loginapSecuritySettings
      properties:
        encryptionKey: o1AU7wS0wrXESrk4T5JiBTQfRttunp6YsDHwqjzKy8o=
        hmacKey: dzymCR5M9b3dWg8HFWnlsTeNULFsP9vBtQ0D1zgJqueqxCmDq9fTk4v2NNa9IGqxJLDydtMK8TrmqY8gz2ktKw==
    ui:
      type: LoginappUi
      id: loginappUiSettings
      properties:
        authenticationUi:
          type: AuthenticationUiConfigs
          id: authFlowUIs
          displayName: Authentication Flow UIs
          properties:
            flowUis:
            - pluginList:
              - type: AuthenticationUi
                id: demoApplicationUi
                displayName: Demo Authentication Flow UI
                properties:
                  cancellationTarget:
                    type: SameFlowRedirectTarget
                    id: sameFlowRedirectTarget
                  customizedStepUis:
                  - pluginList:
                    - type: LinkConfigurationAuthenticationStepUi
                      id: usernamePwdStepUiLinks
                      properties:
                        publicSelfServiceLink:
                          type: PublicSelfServiceFlowLink
                          id: pwdResetUiLink
                          displayName: Password Reset Link
                          properties:
                            flowId:
                              ref: pwdResetFlowId
                        stepId:
                          ref: usernamePwdAuthStepId
                  maintenanceMessageUiSettings:
                    type: MaintenanceMessageUiSettings
                    id: maintMsgUi
                    displayName: Maintenance Message Flow Settings
                  targetApplicationId:
                    ref: demoApplicationId
                  targetURIResolver:
                    type: TargetURIResolver
                    id: protalPageRedirectTarget
                    displayName: Redirect to Portal Page
                    properties:
                      allowedURIs:
                      - valueList:
                        - /(?!/).*
                      defaultValue: /auth-login/ui/app/protected/portal
              - type: AuthenticationUi
                id: a76a231e-bdbc-472d-94d1-86739e7af115
                displayName: AAUI for Airlock Gateway Config Center
                properties:
                  targetApplicationId:
                    ref: 9fa816ce-6c65-49bb-84b1-1350163c61d7
                  targetURIResolver:
                    type: TargetURIResolver
                    id: 443c009c-a8df-4e0c-97ed-9dfd48b9aa87
                    displayName: URL for Airlock Gateway Config Center
                    properties:
                      defaultValue: https://gw.example.com/airlock/alec_security_check
            nonFlowUiSettings:
              type: NonFlowAuthenticationUi
              id: nonFlowUiSettings
              properties:
                maintenanceMessageUi:
                  ref: maintMsgUi
            onLogout:
              type: ShowLogoutDisclaimerPage
              id: onLogoutPage
              properties:
                targetOnContinue:
                  type: ParameterBasedTargetUri
                  id: urlParmTargetUri
                  properties:
                    queryParameterUriExtractor:
                      type: QueryParameterURIValueExtractor
                      id: locationUrlParameter
                      properties:
                        allowedUriPatterns:
                        - valueList:
                          - https://iam.example.com:8443/auth-login/check-login\?Location=https%3A%2F%2Fgw.example.com%2Fairlock%2Falec_security_check
                        parameterName: Location
        loginRestUiContentSecurityPolicy:
          type: LoginappUiContentSecurityPolicy
          id: loginappCsp
          properties:
            contentSecurityPolicy: 'default-src ''self''; object-src ''none''; script-src ${cspNonce} ''strict-dynamic'' ''self'' https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com; img-src ''self'' data: https://api.futurae.com; connect-src ''self'' https://api.futurae.com wss://api.futurae.com https://hcaptcha.com https://*.hcaptcha.com; base-uri ''self''; frame-ancestors ''none''; frame-src https://www.google.com/recaptcha/ https://recaptcha.google.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com ''self''; style-src https://hcaptcha.com https://*.hcaptcha.com ''self'';'
        publicSelfServiceUi:
          type: PublicSelfServiceUiConfigs
          id: publicSelfServiceUis
          displayName: Public Self-Sevice Flow UIs
          properties:
            flowUis:
            - pluginList:
              - type: PublicSelfServiceUi
                id: pwdResetUi
                displayName: Password Reset Flow UI
                properties:
                  cancellationTarget:
                    ref: sameFlowRedirectTarget
                  completionTarget:
                    type: AuthFlowRedirectTarget
                    id: redirectToAuth
                    displayName: Redirect to Authentication
                  flowId:
                    ref: pwdResetFlowId
                  maintenanceMessageUiSettings:
                    ref: maintMsgUi
        selfServiceUi:
          type: SelfServiceUiConfigs
          id: protectedSelfServiceUis
          displayName: Protected Self-Service Flow UIs
          properties:
            applicationPortal:
              type: ApplicationPortalUi
              id: applicationPortalUi
              properties:
                portalGroups:
                - pluginList:
                  - type: ApplicationPortalGroup
                    id: applicationPortalGroupForIamSelfServices
                    displayName: Application Portal Group Self-Services
                    properties:
                      identifier: self-services
                      portalTargets:
                      - pluginList:
                        - type: ApplicationPortalTarget
                          id: applicationPortalTargetPasswordChange
                          displayName: Application Portal Target Password Change
                          properties:
                            identifier: password-change
                            redirectByAccess: 'false'
                            redirectTarget:
                              type: SelfServiceFlowRedirectTarget
                              id: SelfServiceFlowRedirectTargetConfig-x9FV2G
                              displayName: Self-Service Flow Redirect Password Change
                              properties:
                                flowId:
                                  ref: pwdChangeSelfServiceFlowId
                        - type: ApplicationPortalTarget
                          id: applicationPortalTargetRememberMeManagement
                          displayName: Application Portal Target Remember-Me Device Management
                          properties:
                            identifier: remember-me-device-management
                            redirectByAccess: 'false'
                            redirectTarget:
                              type: RememberMeDeviceManagementFlowRedirectTarget
                              id: RememberMeDeviceManagementFlowRedirectTargetConfig-DhCrmf
            flowUis:
            - pluginList:
              - type: SelfServiceUi
                id: pwdChangeUi
                displayName: Password Change UI
                properties:
                  cancellationTarget:
                    ref: redirectToAuth
                  completionTarget:
                    ref: redirectToAuth
                  flowId:
                    ref: pwdChangeSelfServiceFlowId
                  maintenanceMessageUiSettings:
                    ref: maintMsgUi
              - type: SelfServiceUi
                id: rememberMeSelfServiceUi
                displayName: Remember-Me Device Deletion Flow UI
                properties:
                  cancellationTarget:
                    type: RememberMeDeviceManagementFlowRedirectTarget
                    id: rememberMeDeviceListRedirect
                  completionTarget:
                    ref: rememberMeDeviceListRedirect
                  flowId:
                    ref: rememberMeDeletionSelfServiceFlowId
                  maintenanceMessageUiSettings:
                    ref: maintMsgUi
                  showConfirmationPage: 'false'
            rememberMeDeviceManagement:
              type: RememberMeDeviceManagementUi
              id: rememberMeListUi
              properties:
                flowToDeleteDevice:
                  ref: rememberMeDeletionSelfServiceFlowId
                pageExitTarget:
                  ref: redirectToAuth
- type: Adminapp
  id: adminapp
  displayName: adminapp
  properties:
    accessControl:
      type: RoleBasedAccessControl
      id: adminappAccessControl
      displayName: Adminapp Access Control
      properties:
        accessServiceContainer: superadmin
        activateToken: tokenadmin,superadmin
        applyConfig: superadmin
        changeAdministratorPassword: NO RESTRICTION
        createAdministrator: superadmin
        createEditTechnicalClient: superadmin
        createUser: useradmin,superadmin
        deactivateToken: tokenadmin,superadmin
        deleteAdministrator: superadmin
        deleteAdministratorPassword: superadmin
        deleteMaintenanceMessage: sysadmin,superadmin
        deletePassword: useradmin,superadmin
        deleteTechnicalClient: superadmin
        deleteToken: tokenadmin,superadmin
        deleteUser: useradmin,superadmin
        editAdministrator: superadmin
        editConfig: superadmin
        editMaintenanceMessage: sysadmin,superadmin
        editToken: tokenadmin,superadmin
        editUser: useradmin,superadmin
        editUsername: useradmin,superadmin
        generateAdministratorPassword: superadmin
        generatePassword: useradmin,superadmin
        generateTokenIak: tokenadmin,superadmin
        listAdministrators: superadmin
        listMaintenanceMessages: sysadmin,superadmin
        listUsers: useradmin,tokenadmin,helpdesk,superadmin
        lockAdministrator: superadmin
        lockTechnicalClient: superadmin
        lockUser: useradmin,helpdesk,superadmin
        manageOAuth2Consents: useradmin,superadmin
        manageTokens: superadmin
        orderNewToken: tokenadmin,superadmin
        orderPassword: useradmin,superadmin
        restServiceAccessController:
          type: ResourceAccessController
          id: adminappRestApiAccessRules
          displayName: Admin Resource Access Rules
          properties:
            allowRules:
            - pluginList:
              - type: ResourceAccessControllerAccessRule
                id: adminappRestApiAllowSmsSend
                displayName: sendSms
                properties:
                  methodPattern: POST
                  pathPattern: /sms/?
                  roles: useradmin,superadmin
              - type: ResourceAccessControllerAccessRule
                id: adminappRestApiAllowSmsDeliveryStatus
                displayName: smsDeliveryStatus
                properties:
                  methodPattern: GET
                  pathPattern: /sms/[^/]+/?
                  roles: useradmin,superadmin
              - type: ResourceAccessControllerAccessRule
                id: adminappRestApiAllowPwdCheck
                displayName: passwordCheck
                properties:
                  methodPattern: POST
                  pathPattern: /users/[^/]+/password/check/?
                  roles: useradmin,superadmin
              - type: ResourceAccessControllerAccessRule
                id: adminappRestApiAllowEnforcePwdChange
                displayName: enforcePasswordChange
                properties:
                  methodPattern: POST,DELETE
                  pathPattern: /users/[^/]+/password/enforce-change/?
                  roles: useradmin,superadmin
        triggerPasswordReset: useradmin,superadmin
        unlockAdministrator: superadmin
        unlockTechnicalClient: superadmin
        unlockUser: useradmin,superadmin
        unorderNewToken: tokenadmin,superadmin
        unorderPassword: useradmin,superadmin
        viewAdministrator: superadmin
        viewContextData: useradmin,tokenadmin,helpdesk,superadmin
        viewLicense: superadmin
        viewLog: sysadmin,superadmin
        viewTechnicalClients: superadmin
        viewToken: tokenadmin,helpdesk,superadmin
        viewUser: useradmin,tokenadmin,helpdesk,superadmin
        viewUserLogs: useradmin,tokenadmin,helpdesk,superadmin
    administrators:
      type: AdministratorsConfiguration
      id: adminSettings
      displayName: Administrator Settings
      properties:
        administratorsManagement:
          type: AdministratorsManagement
          id: adminMgmt
          displayName: Manage Admins
          properties:
            adminUserStore:
              type: DatabaseUserStoreProvider
              id: adminUserStore
              displayName: Admin User Store
              properties:
                databaseUserPersister:
                  type: DatabaseUserPersister
                  id: adminPersister
                  displayName: Admins on Database
                  properties:
                    colFailedLogins: failed_logins
                    colFailedLoginsBeforeLatestLogin: failed_logins_before
                    colFirstLogin: first_login
                    colLatestLoginAttempt: lat_login_attempt
                    colLatestPasswordChange: pwd_lat_chg
                    colLatestSuccessfulLogin: lat_succ_login
                    colNextEnforcedPasswordChange: pwd_next_chg
                    colPassword: pwd_hash
                    colPasswordChangeForced: pwd_chg_enf
                    colPasswordDeliveryDate: pwd_lat_del
                    colPasswordGenerationDate: pwd_lat_gen
                    colPasswordOrderedFlag: pwd_order_new
                    colRecordInsertionDate: rowInsertDate
                    colRecordInsertionUser: rowInsertUser
                    colRecordModificationDate: rowUpdateDate
                    colRecordModificationUser: rowUpdateUser
                    colRoleString: roles
                    colSecondLatestSuccessfulLogin: lat_succ_login2
                    colTotalLogins: total_logins
                    colUserLockDate: lock_date
                    colUserLockReason: lock_reason
                    colUserLocked: locked
                    colUserName: username
                    colUserNotValidAfter: not_valid_after
                    colUserNotValidBefore: not_valid_before
                    colVersionId: rowVersionId
                    contextDataColumns:
                    - pluginList:
                      - ref: ctxDataItemGivenname
                      - ref: ctxDataItemSurname
                      - ref: ctxDataItemEmail
                    isPwdHashStringType: 'true'
                    recordModificationUser: AirlockIAM
                    sqlDataSource:
                      ref: sqlConnection
                    userTableName: medusa_admin
            assignableRoleCombinations:
            - valueList:
              - useradmin
              - tokenadmin
              - helpdesk
              - sysadmin
              - superadmin
              - useradmin,tokenadmin
              - useradmin,sysadmin
            columnsInAdminList:
            - pluginList:
              - type: StringUserProfileItem
                id: givennameLabel
                displayName: Givenname Admintool Label
                properties:
                  optional: 'false'
                  propertyName: givenname
                  stringResourceKey: userdata.label.firstname
              - type: StringUserProfileItem
                id: surnameLabel
                displayName: Surname Admintool Label
                properties:
                  optional: 'false'
                  propertyName: surname
                  stringResourceKey: userdata.label.lastname
              - type: EmailUserProfileItem
                id: adminEmailLabel
                displayName: Admin Email Admintool Label
                properties:
                  checkUniqueness:
                    ref: adminPersister
                  propertyName: email
                  stringResourceKey: userdata.label.email
            passwordGenerator:
              type: ExtendedStringGenerator
              id: adminPwdGenerator
              displayName: Admin Password Generator
            passwordHashFunction:
              ref: pwdHash
            privilegeEscalationProtectedAdminRoles:
            - valueList:
              - superadmin
            rowsOnAdminDetailPage:
            - pluginList:
              - ref: givennameLabel
              - ref: surnameLabel
              - ref: adminEmailLabel
            superAdminRole: superadmin
        authenticator:
          type: MainAuthenticator
          id: adminAuthenticator
          displayName: Adminapp Authenticator
          properties:
            enableStealthMode: 'false'
            first:
              type: PasswordServicePasswordAuthenticator
              id: adminPwdAuthenticator
              displayName: Admin Password Authenticator
              properties:
                passwordSettings:
                  type: PasswordSettings
                  id: adminPwdSettings
                  displayName: Admin Password Settings
                  properties:
                    passwordGenerator:
                      ref: adminPwdGenerator
                    passwordPolicy:
                      type: SimplePasswordPolicy
                      id: adminPwdPolicy
                      displayName: Default Password Policy for Admins
                      properties:
                        noPreviouslyUsedPasswords: 'true'
                    passwordService:
                      type: PersisterPasswordService
                      id: adminPwdService
                      displayName: Admin Password Service
                      properties:
                        hashFunction:
                          ref: pwdHash
                        userStore:
                          ref: adminUserStore
                userPersister:
                  ref: adminPersister
            userPersister:
              ref: adminPersister
        passwordPolicy:
          ref: adminPwdPolicy
        passwordService:
          ref: adminPwdService
    eventSettings:
      type: AdminappEventSettings
      id: adminappEventSettings
      properties:
        eventSubscribers:
        - pluginList:
          - type: AdminappEmailEventSubscriber
            id: adminappEmailEventSubscriber
            displayName: Email Event Subscriber for User Locked (Adminapp)
            properties:
              bodyResourceKey: email.notification.user-locked-event.body
              emailService:
                ref: dummyEmailService
              event:
                ref: userLockedEvent
              languageContextDataName:
                ref: ctxDataItemNameLang
              recipientAddress:
                type: ContextDataRecipient
                id: eventEmailRecipientFromCtxData
                properties:
                  contextDataName:
                    ref: ctxDataItemNameEmail
              subjectResourceKey: email.notification.user-locked-event.subject
    gatewaySettings:
      type: AirlockGateway
      id: airlockGatewayAdminapp
      displayName: Airlock Settings
    licenseAnalytics:
      type: LicenseAnalytics
      id: analytics
    logViewer:
      type: LogViewer
      id: logViewer
      properties:
        colorScheme:
        - pluginList:
          - type: ColoringRule
            id: auditLogColoringRule
            displayName: Audit Log
            properties:
              backgroundColor: blue
              regexpPatternString: ^MEDUSA Audit Log Message
          - type: ColoringRule
            id: successfulLoginsLogColoringRule
            displayName: Successful Logins
            properties:
              backgroundColor: green
              regexpPatternString: is\ssuccessfully\sauthenticated\sby
          - type: ColoringRule
            id: successfulAdminLoginLogColoringRule
            displayName: Successful Admin Logins
            properties:
              backgroundColor: green
              regexpPatternString: Administrator.*successfully\sauthenticated|Authenticated\sadministrator
          - type: ColoringRule
            id: failedLoginsLogColoringRule
            displayName: Failed Logins
            properties:
              backgroundColor: yellow
              regexpPatternString: Authentication failed
          - type: ColoringRule
            id: warningsLogColoringRule
            displayName: Warnings
            properties:
              backgroundColor: orange
              regexpPatternString: WARN
          - type: ColoringRule
            id: exceptionsLogColoringRule
            displayName: Exceptions
            properties:
              backgroundColor: red
              regexpPatternString: '\bException-(Type|ID)\s:'
          - type: ColoringRule
            id: configActionsLogColoringRule
            displayName: Config Actions
            properties:
              backgroundColor: purple
              regexpPatternString: (Configuration activation)|(Activated configuration)
          - type: ColoringRule
            id: bannerLogColoringRule
            displayName: Banner
            properties:
              backgroundColor: black
              foregroundColor: black
              foregroundColorForMetaData: black
              regexpPatternString: _\s+_\s+_\s+_\s+___\s+_\s+__\s+__
        logfiles:
        - pluginList:
          - type: LogFile
            id: loginappLogFile
            displayName: Loginapp Logfile
            properties:
              file: ./instances/auth/logs/loginapp-parsable.log
              filterPatterns:
              - pluginList:
                - type: FilterPattern
                  id: warningLogViewerPattern
                  displayName: Pattern for Warnings
                  properties:
                    nameTranslationKey: logViewer.warnings-only.label
                    regexpPatternString: WARN
                - type: FilterPattern
                  id: auditLogViewerPattern
                  displayName: Pattern for Audit Messages
                  properties:
                    nameTranslationKey: logViewer.audit-log.label
                    regexpPatternString: MEDUSA Audit Log Message
                - type: FilterPattern
                  id: exceptionLogViewerPattern
                  displayName: Pattern for Exceptions
                  properties:
                    nameTranslationKey: logViewer.exception-reasons.label
                    regexpPatternString: '\bException-(Type|ID)\s:'
                - type: FilterPattern
                  id: failedLoginsLogViewerPattern
                  displayName: Pattern for Failed Logins
                  properties:
                    nameTranslationKey: logViewer.login-failures.label
                    regexpPatternString: for\sauthentication\smethod.*with\sresult\s'FAIL'|Username/Password\sAuthentication\sStep.*with\sresult\s'FAIL_RETRY'
                - type: FilterPattern
                  id: successfulLoginsLogViewerPattern
                  displayName: Pattern for Successful Logins
                  properties:
                    nameTranslationKey: logViewer.successful-logins.label
                    regexpPatternString: is\ssuccessfully\sauthenticated\sby
              nameTranslationKey: logViewer.login-app.name
          - type: LogFile
            id: adminappLogFile
            displayName: Adminapp Logfile
            properties:
              file: ./instances/auth/logs/adminapp-parsable.log
              filterPatterns:
              - pluginList:
                - ref: auditLogViewerPattern
                - ref: exceptionLogViewerPattern
                - ref: warningLogViewerPattern
                - type: FilterPattern
                  id: failedAdminLoginsLogViewerPattern
                  displayName: Pattern for Failed Admin Logins
                  properties:
                    nameTranslationKey: logViewer.login-failures.label
                    regexpPatternString: 'Failed\sto\sauthenticate:'
                - type: FilterPattern
                  id: successfulAdminLoginsLogViewerPattern
                  displayName: Pattern for Successful Admin Logins
                  properties:
                    nameTranslationKey: logViewer.successful-logins.label
                    regexpPatternString: Administrator.*successfully\sauthenticated|Authenticated\sadministrator
              nameTranslationKey: logViewer.admin-app.name
          - type: LogFile
            id: transactionApprovalLogFile
            displayName: Transaction Approval Logfile
            properties:
              file: ./instances/auth/logs/transaction-approval-parsable.log
              nameTranslationKey: logViewer.transaction-approval-app.name
          - type: LogFile
            id: serviceContainerLogFile
            displayName: Servicecontainerapp Logfile
            properties:
              file: ./instances/auth/logs/servicecontainerapp-parsable.log
              filterPatterns:
              - pluginList:
                - type: FilterPattern
                  id: serverStatisticsLogViewerPattern
                  displayName: Pattern for Server Statistics
                  properties:
                    nameTranslationKey: logViewer.statistics.label
                    regexpPatternString: 'Stats:'
                - ref: exceptionLogViewerPattern
                - ref: auditLogViewerPattern
                - ref: warningLogViewerPattern
              nameTranslationKey: logViewer.servicecontainer-app.name
    maintenanceMessages:
      type: MaintenanceMessageConfiguration
      id: adminappMaintMsgs
      displayName: Manage Maintenance Messages
      properties:
        enableMenuItem: 'true'
        languages:
        - valueList:
          - de
          - en
          - fr
          - it
        messagesPerPage: '25'
        persister:
          ref: maintMsgPersister
    rest:
      type: AdminappRest
      id: adminRestApi
      displayName: Adminapp REST API
      properties:
        requestAuthentication:
          type: BasicAuthRequestAuthentication
          id: adminRestApiBasicAuth
          properties:
            passwordRepository:
              type: ExternalDatabasePasswordRepository
              id: adminPwdRepo
              displayName: Admin Password Repository
              properties:
                hashFunction:
                  ref: pwdHash
                userStore:
                  ref: adminUserStore
            userStore:
              ref: adminUserStore
    serviceContainerSharedSecret: zrLb3pAfGJvyFCoCZZsE
    users:
      type: UsersConfiguration
      id: userMgmtConfig
      properties:
        advancedSearchFilters:
        - pluginList:
          - type: LockedUserFilter
            id: lockStatusUserFilter
            displayName: Filter by locking status
          - type: SimpleLatestSuccessfulLoginFilter
            id: latestSuccessfulLoginUserFilter
            displayName: Filter by lastest successful login
        authenticationTokens:
        - pluginList:
          - type: PasswordTokenController
            id: userPwdManagement
            displayName: Manage User Passwords
            properties:
              passwordGenerator:
                type: PasswordGenerator
                id: userMgmtPasswordGenerator
                displayName: User Password Generation
                properties:
                  fileNamePrefix: password
                  fileNameSuffix: .pdf
                  generator:
                    ref: userPwdGenerator
                  outputDirectory: instances/auth/pdfs
                  workingDirectory: instances/auth/pdfs/inwork
        availableUserRoles:
        - valueList:
          - customer
          - employee
          - admin
        columnsInUserList:
        - pluginList:
          - ref: givennameLabel
          - ref: surnameLabel
          - type: StringUserProfileItem
            id: companyLabel
            displayName: Company Admintool Label
            properties:
              propertyName: company
              stringResourceKey: userdata.label.company
          - type: StringUserProfileItem
            id: authMethodLabel
            displayName: Authmethod Admintool Label
            properties:
              propertyName: auth_method
              stringResourceKey: listuserspage.col-label-auth-method
        defaultSortColumn: username
        export:
          type: CsvUsersExport
          id: csvUserExport
          displayName: CSV Users Export
          properties:
            contextKeys:
            - valueList:
              - salutation
              - givenname
              - surname
              - street
              - streetNumber
              - address2
              - zipcode
              - town
              - state
              - country
              - company
              - email
              - language
              - disclaimer_tag
              - auth_method
            type: FULL
        languageContextKey: language
        lockingSettings:
          type: LockingSettings
          id: userMgmtLockingSettings
          properties:
            lockReasons:
            - valueList:
              - LockReason.InitiatedByUser
              - LockReason.InitiatedByAdmin
            temporaryLockingConfig:
              ref: tempLocking
        maxUsersToList: '25'
        rememberMeManagementEnabled: 'true'
        rememberMeSettings:
          ref: rememberMeSettings
        rowsOnUserDetailPage:
        - pluginList:
          - type: StringUserProfileItem
            id: salutationLabel
            displayName: Salutation Admintool Label
            properties:
              propertyName: salutation
              stringResourceKey: userdata.label.salutation
          - ref: givennameLabel
          - ref: surnameLabel
          - type: StringUserProfileItem
            id: streetLabel
            displayName: Street Admintool Label
            properties:
              propertyName: street
              stringResourceKey: userdata.label.street
          - type: StringUserProfileItem
            id: streetNumberLabel
            displayName: Streetnumber Admintool Label
            properties:
              propertyName: streetNumber
              stringResourceKey: userdata.label.street-number
          - type: StringUserProfileItem
            id: zipLabel
            displayName: Zipcode Admintool Label
            properties:
              propertyName: zipcode
              stringResourceKey: userdata.label.zipcode
          - type: StringUserProfileItem
            id: townLabel
            displayName: Town Admintool Label
            properties:
              propertyName: town
              stringResourceKey: userdata.label.town
          - type: ListUserProfileItem
            id: countryLabel
            displayName: Country Admintool Label
            properties:
              itemList: |-
                534
                      ABW
                      AFG
                      AGO
                      AIA
                      ALB
                      AND
                      ARE
                      ARG
                      ARM
                      ASM
                      ATF
                      ATG
                      AUS
                      AUT
                      AZE
                      BDI
                      BEL
                      BEN
                      BES
                      BFA
                      BGD
                      BGR
                      BHR
                      BHS
                      BIH
                      BLR
                      BLZ
                      BMU
                      BOL
                      BRA
                      BRB
                      BRN
                      BTN
                      BVT
                      BWA
                      CAF
                      CAN
                      CHE
                      CHL
                      CHN
                      CIV
                      CMR
                      COD
                      COG
                      COK
                      COL
                      COM
                      CPV
                      CRI
                      CUB
                      CUW
                      CXR
                      CYM
                      CYP
                      CZE
                      DEU
                      DJI
                      DMA
                      DNK
                      DOM
                      DZA
                      ECU
                      EGY
                      ERI
                      ESH
                      ESP
                      EST
                      ETH
                      FIN
                      FJI
                      FLK
                      FRA
                      FSM
                      GAB
                      GBR
                      GEO
                      GGY
                      GHA
                      GIB
                      GIN
                      GLP
                      GMB
                      GNB
                      GNQ
                      GRC
                      GRD
                      GRL
                      GTM
                      GUF
                      GUM
                      GUY
                      HKG
                      HMD
                      HND
                      HRV
                      HTI
                      HUN
                      IDN
                      IND
                      IOT
                      IRL
                      IRN
                      IRQ
                      ISL
                      ISR
                      ITA
                      JAM
                      JEY
                      JOR
                      JPN
                      KAZ
                      KEN
                      KGZ
                      KHM
                      KIR
                      KNA
                      KOR
                      KWT
                      LAO
                      LBN
                      LBR
                      LBY
                      LCA
                      LIE
                      LKA
                      LSO
                      LTU
                      LUX
                      LVA
                      MAC
                      MAR
                      MCO
                      MDA
                      MDG
                      MDV
                      MEX
                      MHL
                      MKD
                      MLI
                      MLT
                      MMR
                      MNE
                      MNG
                      MNP
                      MOZ
                      MRT
                      MSR
                      MTQ
                      MUS
                      MWI
                      MYS
                      MYT
                      NAM
                      NCL
                      NER
                      NFK
                      NGA
                      NIC
                      NIU
                      NLD
                      NOR
                      NPL
                      NRU
                      NZL
                      OMN
                      PAK
                      PAN
                      PCN
                      PER
                      PHL
                      PLW
                      PNG
                      POL
                      PRI
                      PRK
                      PRT
                      PRY
                      PSE
                      PYF
                      QAT
                      REU
                      ROU
                      RUS
                      RWA
                      SAU
                      SDN
                      SEN
                      SGP
                      SGS
                      SHN
                      SLB
                      SLE
                      SLV
                      SMR
                      SOM
                      SPM
                      SRB
                      SSD
                      STP
                      SUR
                      SVK
                      SVN
                      SWE
                      SWZ
                      SXM
                      SYC
                      SYR
                      TCA
                      TCD
                      TGO
                      THA
                      TJK
                      TKL
                      TKM
                      TLS
                      TON
                      TTO
                      TUN
                      TUR
                      TUV
                      TWN
                      TZA
                      UGA
                      UKR
                      UMI
                      URY
                      USA
                      UZB
                      VAT
                      VCT
                      VEN
                      VGB
                      VIR
                      VNM
                      VUT
                      WLF
                      WSM
                      YEM
                      ZAF
                      ZMB
                      ZWE
              itemsAreResourceKeys: 'true'
              propertyName: country
              resourceKeyPrefix: countries
              sortItems: 'true'
              stringResourceKey: userdata.label.country
          - ref: companyLabel
          - type: EmailUserProfileItem
            id: userEmailLabel
            displayName: 'User Email Admintool Label '
            properties:
              checkUniqueness:
                ref: userPersister
              propertyName: email
              stringResourceKey: userdata.label.email
          - type: ListUserProfileItem
            id: langLabel
            displayName: Language Admintool Label
            properties:
              itemList: |-
                de
                      fr
                      en
              itemsAreResourceKeys: 'true'
              propertyName: language
              resourceKeyPrefix: language
              sortItems: 'true'
              stringResourceKey: userdata.label.correspondence-language
        showUserValidSection: 'true'
        userDataSource:
          type: UserStoreConfiguration
          id: userMgmtUserStore
        userSearchProfileItems:
        - pluginList:
          - type: UserProfileItemSearch
            id: givennameUserSearchItem
            displayName: Givenname Admintool User Search Item
            properties:
              propertyName: givenname
          - type: UserProfileItemSearch
            id: surnameUserSearchItem
            displayName: Surname Admintool User Search Item
            properties:
              propertyName: surname
          - type: UserProfileItemSearch
            id: companyUserSearchItem
            displayName: Company Admintool User Search Item
            properties:
              propertyName: company
          - type: UserProfileItemSearch
            id: authMethodUserSearchItem
            displayName: Authmethod Admintool User Search Item
            properties:
              propertyName: auth_method
- type: ServiceContainer
  id: serviceContainerApp
  displayName: servicecontainerapp
  properties:
    serviceContainerSharedSecret: zrLb3pAfGJvyFCoCZZsE
    services:
    - pluginList:
      - type: Service
        id: serviceConfigForTaskScheduler
        displayName: Task Scheduler Config
        properties:
          service:
            type: TaskSchedulerService
            id: taskScheduler
            displayName: Task Scheduler Settings
            properties:
              tasks:
              - pluginList:
                - type: TaskSchedule
                  id: pwdLetterTaskSchedule
                  displayName: Schedule for Password Letters
                  properties:
                    interval: never
                    name: Generate Password Letters
                    task:
                      type: PasswordBatchTask
                      id: pwdLetterTask
                      displayName: Password Letter Task
                      properties:
                        credentialSecretGenerator:
                          type: CredentialSecretGenerator
                          id: pwdLetterTaskPwdGenerator
                          displayName: Password Letter Credential Secret Generator
                          properties:
                            configuredFileNameSuffix: pdf
                            deleteOldPasswords: 'true'
                            hashFunctionPlugin:
                              ref: pwdHash
                            languageAttributeName: language
                            outputDirectoryPath: instances/auth/pdfs
                            passwordGenerator:
                              ref: userPwdGenerator
                            passwordRenderer:
                              type: WordTemplatePasswordRenderer
                              id: pwdLetterWordRenderer
                              displayName: Password Letter Word Template
                              properties:
                                defaultTemplate: instances/common/report-templates/password-letter-de.docx
                                saveOptions:
                                  type: PdfSaveAction
                                  id: pwdLetterSaveOptions
                                  displayName: PDF Save Options with System Default Fonts
                                template:
                                - pluginList:
                                  - type: LanguageSpecificTemplate
                                    id: pwdLetterTemplateEn
                                    displayName: Password English Template
                                    properties:
                                      language: en
                                      template: instances/common/report-templates/password-letter-en.docx
                            reportTypeShortDesc: password letter
                            workingDirectoryPath: instances/auth/pdfs/inwork
                        tokenCleanupConfigs:
                        - pluginList:
                          - type: RememberMeTokenCleanup
                            id: rememberMeCleanup
                            properties:
                              rememberMeConfig:
                                ref: rememberMeRepo
                        userIterator:
                          type: DatabaseUserPersister
                          id: usersWithPwdFlagSetPersister
                          displayName: Users with password flag set
                          parentRef: userPersister
                          properties:
                            additionalIteratorWhereClause: pwd_order_new = 1
                        userPersister:
                          ref: usersWithPwdFlagSetPersister
                - type: TaskSchedule
                  id: rememberMeCleanupTaskSchedule
                  displayName: Schedule for Remember-Me Cleanup Task
                  properties:
                    firstTime: 04:00:00
                    interval: 1 day
                    name: Cleanup expired Remember-Me tokens
                    task:
                      type: RememberMeTokenCleanupTask
                      id: rememberMeCleanupTask
                      properties:
                        rememberMeConfig:
                          ref: rememberMeSettings
                - type: TaskSchedule
                  id: userTrailLogCleanupTaskSchedule
                  displayName: Schedule for User Trail Log Clean-up Task
                  properties:
                    firstTime: 03:00:00
                    interval: 1 day
                    name: Clean-up expired User Trail Logs
                    task:
                      type: UserTrailLogCleanupTask
                      id: userTrailLogCleanupTask
                      properties:
                        logRetentionTime: 30d
                - type: TaskSchedule
                  id: ssoTicketCleanupTaskSchedule
                  displayName: Schedule for Accepted SSO Tickets Clean-up Task
                  properties:
                    firstTime: 05:00:00
                    interval: 1 day
                    name: Clean-up expired accepted SSO tickets
                    task:
                      type: AcceptedSsoTicketsCleanupTask
                      id: ssoTicketCleanupTask
- type: CookieTicketAdder
  id: cc2ce136-2c1f-445b-aa19-6a49131e1860
  displayName: Assertion in cookie AL_ALEC_AUTH_TICKET
  properties:
    cookieDomain: seclutions.com
    cookieName: AL_ALEC_AUTH_TICKET
    cookiePath: /airlock/alec_security_check
- type: RedirectOnLogout
  id: 81a6839f-5253-42b6-9b84-18d0236443bf
  properties:
    target:
      ref: urlParmTargetUri
- type: QueryParameterURIValueExtractor
  id: cc41c2aa-4052-4570-be10-c29c5959c781
  properties:
    parameterName: Location
- type: OAuth2ClientResourceRequest
  id: e9b3f4d8-64ef-46af-bf7a-95fbe88496ba
- type: OpenIDConnectNoSignatureValidator
  id: 753065c5-2e42-44ba-9943-a788de5c811f
- type: OpenIDConnectRS256SignatureValidator
  id: eed7d13a-cb47-40eb-bf3d-207ca3b4dba4
  properties:
    httpClient:
      ref: 7b741a8a-dedb-4651-920a-d740cffe0923
    remoteKeyLocation: https://ssotest.ergon.ch/auth/rest/oauth2/authorization-servers/sso-op-asymmetric/jwks
